#include <fases/criadores/CriadorCastelo.h>
#include <ente/entidades/inimigos/Atirador.h>
#include <ente/entidades/inimigos/Saltador.h>
#include <ente/entidades/inimigos/Fastasma.h>
#include <ente/entidades/obstaculos/Plataforma.h>
#include <ente/entidades/obstaculos/Pote.h>
#include <ente/entidades/obstaculos/Espinhos.h>
#include <ente/entidades/obstaculos/Gelatina.h>


char mFase2[22][41] = { //8A,6D--7p,5f
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','D','*','*','*','*','D','*','*','*','D','*','*','*','*','*','*','*','*','*','*','*','*','*','*','D','*','*','*','*','*','D','*','*','*','*','*','D','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','f'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','f','*','*','*','*','f','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','f'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','#','#','#','*','*','#','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','#','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','A','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','A','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','#','#','*','*','*','*','*','*','*','#','*','*','*','*','*','*','*','*','#','*','*','*','*','*','*','*','#','#','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','A','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','A','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','#','#','#','*','*','*','*','*','*','*','*','f','*','*','*','*','*','#','#','#','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'},
    {'*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','A'},
    {'A','*','*','*','A','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','A','*','*','*','*','*','*','#','#'},
    {'*','*','#','#','#','#','#','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','#','#','#','#','#','#','#','#','#'},
    {'*','#','#','#','#','#','#','#','#','#','p','*','*','p','*','*','p','*','*','p','*','*','p','*','*','p','*','*','p','*','*','#','#','#','#','#','#','#','#','#','#'}
};




using namespace Fases;

CriadorCastelo::CriadorCastelo(){}

CriadorCastelo::~CriadorCastelo(){}

#define AtMIN 7
#define AtMAX 8

#define DMIN 5
#define DMAX 6

void CriadorCastelo::criarInimigos(Listas::ListaEntidade<Entidades::Inimigo>* li){
    //add(li,new Entidades::Saltador(sf::Vector2f(30,600.f)));
    //add(li,new Entidades::Atirador(sf::Vector2f(230,600.f)));
    add(li,new Entidades::Fantasma(sf::Vector2f(330,600.f)));

    int n = rand()% (DMAX-DMIN)+DMIN;
    int *v =  (int*) malloc(n*sizeof(int));
    preencher(v,DMAX,n);
    criarSaltadores(li,mFase2,v,n);
    free(v);

    n = rand()% (AtMAX-AtMIN)+AtMIN;
    v =  (int*) malloc(n*sizeof(int));
    preencher(v,AtMAX,n);
    criarAtiradores(li,mFase2,v,n);
    free(v);
}

#define EpMAX 7
#define EpMIN 6

#define POTEMAX 5
#define POTEMIN 4

void CriadorCastelo::criarObstaculos(Listas::ListaEntidade<Entidades::Obstaculo>* lo){
    criarLimites(lo,mFase2);
    //add(lo,new Entidades::Plataforma(sf::Vector2f(430,600.f)));
    //add(lo,new Entidades::Pote(sf::Vector2f(530,600.f)));
    //add(lo,new Entidades::Espinhos(3,sf::Vector2f(630,600.f)));
    //add(lo,new Entidades::Gelatina(sf::Vector2f(600,600.f)));
    add(lo,new Entidades::Gelatina(sf::Vector2f(280,600.f)));
    add(lo,new Entidades::Gelatina(sf::Vector2f(1050,600.f)));

    int n = rand()% (POTEMAX-POTEMIN)+POTEMIN;
    int *v =  (int*) malloc(n*sizeof(int));
    preencher(v,POTEMAX,n);
    criarPote(lo,mFase2,v,n);
    free(v);
    
    n = rand()% (EpMAX-EpMIN)+EpMIN;
    v =  (int*) malloc(n*sizeof(int));
    preencher(v,EpMAX,n);
    criarEspinhos(lo,mFase2,v,n);
    free(v);
}
